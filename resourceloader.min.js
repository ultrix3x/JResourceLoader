(function(m,n,e,p){var g={text:"1.1.0",major:1,minor:1,sub:0},q=function(f,e,c,k){Date.now=Date.now||function(){return(new Date).getTime()};c.version=g;c.storage={};f.localStorage?(c.storage.get=function(b,a){a==k&&(a=3600);a*=1E3;var d=f.localStorage.getItem(b);if(null!=d)try{var c=JSON.parse(d);if(c&&c.timestamp&&c.timestamp+a>=Date.now())return c.data}catch(e){}return null},c.storage.set=function(b,a){var d=JSON.stringify({timestamp:Date.now(),data:a});f.localStorage.setItem(b,d)}):f.sessionStorage&& (c.storage.get=function(b,a){a==k&&(a=3600);a*=1E3;var d=f.sessionStorage.getItem(b);if(null!=d)try{var c=JSON.parse(d);if(c&&c.timestamp&&c.timestamp+a>=Date.now())return c.data}catch(e){}return null},c.storage.set=function(b,a){var d=JSON.stringify({timestamp:Date.now(),data:a});f.sessionStorage.setItem(b,d)});c.isImageCompatible=null;c.loadImage=function(b,a){a=a||{};null===c.isImageCompatible&&(c.isImageCompatible="function"==typeof btoa);if("object"==typeof b&&b.getAttribute){var d=a.attributeName|| "resource";"done"!==b.getAttribute("data-"+d+"-src-action")&&null!==b.getAttribute("data-"+d+"-src")&&(c.isImageCompatible?(a.imageElement=b,c.load(b.getAttribute("data-"+d+"-src"),a)):(b.setAttribute("src",b.getAttribute("data-"+d+"-src")),a.complete&&a.complete.call&&(a.loadedFrom="web/direct",a.rawsrc=b.getAttribute("data-"+d+"-src"),a.src=a.rawsrc,a.imageElement=b,a.complete.call(a.self,a))),b.setAttribute("data-"+d+"-src-action","done"))}else"string"==typeof b&&c.loadImage(e.getElementById(b))}; c.loadImagesInterval=null;c.loadImages=function(b){b=b||{};null===c.loadImagesInterval&&(c.loadImagesInterval=setInterval(function(){c.loadImages(b)},50));var a=e.getElementsByTagName("img");if(0<a.length)for(var d=0;d<a.length;d++){var h=a[d],l=b.attributeName||"resource";null==h.getAttribute("data-"+l+"-src-action")&&h.getAttribute&&null!==h.getAttribute("data-"+l+"-src")&&c.loadImage(h,b)}};c.stopImageLoading=function(){null!==c.loadImagesInterval&&(clearInterval(c.loadImagesInterval),c.loadImagesInterval= null)};c.load=function(b,a){var d;if("string"==typeof b){a=a||{};a.loadCount=a.loadCount||0;a.loadedFrom=null;a.waitfor=a.waitfor||a.waitFor;if(a.waitfor&&a.waitfor.call&&!1===a.waitfor.call(this,a))return setTimeout(function(){c.load(b,a)},10),this;if(a.test)if(a.test.call){if(a.test.call(this,a))return a.loadedFrom="notLoaded/test",this}else if(a.test)return a.loadedFrom="notLoaded/test",this;a.rawsrc=b;b.match(/^js\!/g)?(b=b.substring(3,b.length),d="js"):b.match(/^css\!/g)?(b=b.substring(4,b.length), d="css"):b.match(/^(jpe|jpeg|jpg|gif|png)\!/g)?(a.imageType=b.substring(0,b.indexOf("!")-1),b=b.substring(b.indexOf("!"),b.length),d="image"):b.match(/\.css$/g)?d="css":(a.mediaType=b.match(/\.(jpe|jpeg|jpg|gif|png)$/g))?(a.mediaType=a.mediaType[0].substring(1,a.mediaType[0].length),d="image"):d="js";a.cacheName=!0===a.cache?b.replace(/[^a-zA-Z0-9]/g,"_"):!1;a.src=b;"js"==d?this._loadScript(b,a):"css"==d?this._loadStyle(b,a):"image"==d&&this._loadImage(b,a)}else if("object"==typeof b)for(d in b)this.load(b[d]); return this};c._loadScript=function(b,a){var d=null;a=a||{};if(!1!==a.cacheName&&(d=this.storage.get(a.cacheName,a.cacheTimeout),null!=d))return a.loadedFrom="cache",c._appendScript(d,a);c._fetchData(b,a,c._appendScript)};c._appendScript=function(b,a){var d=e.getElementsByTagName("head")[0],c=e.createElement("script");c.appendChild(e.createTextNode(b));d.appendChild(c);a.loadCount--;a&&a.complete&&a.complete.call&&a.complete.call(a.self,a)};c._loadStyle=function(b,a){var d=null;a=a||{};if(!1!==a.cacheName&& (d=this.storage.get(a.cacheName,a.cacheTimeout),null!=d))return a.loadedFrom="cache",c._appendStyle(d,a);c._fetchData(b,a,c._appendStyle)};c._appendStyle=function(b,a){var d=e.getElementsByTagName("head")[0],c=e.createElement("style");c.appendChild(e.createTextNode(b));d.appendChild(c);a.loadCount--;a&&a.complete&&a.complete.call&&a.complete.call(a.self,a)};c._loadImage=function(b,a){var d=null;a=a||{};if(!1!==a.cacheName&&(d=this.storage.get(a.cacheName,a.cacheTimeout),null!=d))return a.loadedFrom= "cache",c._assignImage(d,a);c._fetchData(b,a,c._assignImage)};c._assignImage=function(b,a){a.loadCount--;var d="data:",d="png"==a.mediaType?d+"image/png":"gif"==a.mediaType?d+"image/gif":d+"image/jpeg",d=d+";base64,";a.imageElement.setAttribute("src",d+b);console.log(d+b);a&&a.complete&&a.complete.call&&a.complete.call(a.self,a)};c._fetchData=function(b,a,d){a.self=this;if(f.jQuery&&!a.mediaType)f.jQuery.ajax({url:b,dataType:"text",success:function(b){a&&!1!==a.cacheName&&a.self.storage.set(a.cacheName, b);a.loadedFrom="web/jquery";d&&d.call?d.call(a.self,b,a):a&&a.complete&&a.complete.call&&a.complete.call(a.self,a)}});else if(f.XMLHttpRequest){var c=new f.XMLHttpRequest;c.open("GET",b,!0);a.loadCount++;a.mediaType&&(c.responseType="arraybuffer");c.onreadystatechange=function(){if(4==c.readyState){a.loadedFrom="web/xhr";if(a.mediaType)var b=new Uint8Array(this.response),b=String.fromCharCode.apply(null,b),b=btoa(b);else b=c.responseText;a&&!1!==a.cacheName&&a.self.storage.set(a.cacheName,b);d&& d.call?d.call(a.self,b,a):a&&a.complete&&a.complete.call&&a.complete.call(a.self,a)}};c.send(null)}};c.getVersion=function(){return this.version.text};f.resourceLoader=c};if(e.version==p||e&&e.version&&(e.version.major<g.major||e.version.major==g.major&&(e.version.minor<g.minor||e.version.minor==g.minor&&e.version.sub<g.sub)))return q(m,n,e)})(window,document,window.resourceLoader||{});