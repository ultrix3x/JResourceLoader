(function(k,l,e,m){var g={text:"1.0.0",major:1,minor:0,sub:0},n=function(f,e,b,h){Date.now=Date.now||function(){return(new Date).getTime()};b.version=g;b.storage={};f.localStorage?(b.storage.get=function(c,a){a==h&&(a=3600);a*=1E3;var d=f.localStorage.getItem(c);if(null!=d)try{var b=JSON.parse(d);if(b&&b.timestamp&&b.timestamp+a>=Date.now())return b.data}catch(e){}return null},b.storage.set=function(c,a){var d=JSON.stringify({timestamp:Date.now(),data:a});f.localStorage.setItem(c,d)}):f.sessionStorage&&
(b.storage.get=function(c,a){a==h&&(a=3600);a*=1E3;var d=f.sessionStorage.getItem(c);if(null!=d)try{var b=JSON.parse(d);if(b&&b.timestamp&&b.timestamp+a>=Date.now())return b.data}catch(e){}return null},b.storage.set=function(c,a){var d=JSON.stringify({timestamp:Date.now(),data:a});f.sessionStorage.setItem(c,d)});b.load=function(c,a){var d;if("string"==typeof c){a=a||{};a.loadCount=a.loadCount||0;a.loadedFrom=null;a.waitfor=a.waitfor||a.waitFor;if(a.waitfor&&a.waitfor.call&&!1===a.waitfor.call(this,
a))return setTimeout(function(){b.load(c,a)},10),this;if(a.test)if(a.test.call){if(a.test.call(this,a))return a.loadedFrom="notLoaded/test",this}else if(a.test)return a.loadedFrom="notLoaded/test",this;a.rawsrc=c;c.match(/^js\!/g)?(c=c.substring(3,c.length),d="js"):c.match(/^css\!/g)?(c=c.substring(4,c.length),d="css"):d=c.match(/\.css$/g)?"css":"js";a.cacheName=!0===a.cache?c.replace(/[^a-zA-Z0-9]/g,"_"):!1;a.src=c;"js"==d?this._loadScript(c,a):"css"==d&&this._loadStyle(c,a)}else if("object"==typeof c)for(d in c)this.load(c[d]);
return this};b._loadScript=function(c,a){var d=null;a=a||{};if(!1!==a.cacheName&&(d=this.storage.get(a.cacheName,a.cacheTimeout),null!=d))return a.loadedFrom="cache",b._appendScript(d,a);b._fetchData(c,a,b._appendScript)};b._appendScript=function(c,a){var d=e.getElementsByTagName("head")[0],b=e.createElement("script");b.appendChild(e.createTextNode(c));d.appendChild(b);a.loadCount--;a&&a.complete&&a.complete.call&&a.complete.call(a.self,a)};b._loadStyle=function(c,a){var d=null;a=a||{};if(!1!==a.cacheName&&
(d=this.storage.get(a.cacheName,a.cacheTimeout),null!=d))return a.loadedFrom="cache",b._appendStyle(d,a);b._fetchData(c,a,b._appendStyle)};b._appendStyle=function(c,a){var d=e.getElementsByTagName("head")[0],b=e.createElement("style");b.appendChild(e.createTextNode(c));d.appendChild(b);a.loadCount--;a&&a.complete&&a.complete.call&&a.complete.call(a.self,a)};b._fetchData=function(c,a,b){a.self=this;if(f.jQuery)f.jQuery.ajax({url:c,dataType:"text",success:function(c){a&&!1!==a.cacheName&&a.self.storage.set(a.cacheName,
c);a.loadedFrom="web/jquery";b&&b.call?b.call(a.self,c,a):a&&a.complete&&a.complete.call&&a.complete.call(a.self,a)}});else if(f.XMLHttpRequest){var e=new f.XMLHttpRequest;a.loadCount++;e.onreadystatechange=function(){if(4==e.readyState){a.loadedFrom="web/xhr";var c=e.responseText;a&&!1!==a.cacheName&&a.self.storage.set(a.cacheName,c);b&&b.call?b.call(a.self,c,a):a&&a.complete&&a.complete.call&&a.complete.call(a.self,a)}};e.open("GET",c,!0);e.send(null)}};b.getVersion=function(){return this.version.text};
f.resourceLoader=b};if(e.version==m||e&&e.version&&(e.version.major<g.major||e.version.major==g.major&&(e.version.minor<g.minor||e.version.minor==g.minor&&e.version.sub<g.sub)))return n(k,l,e)})(window,document,window.resourceLoader||{});